import{d as _,m as p,e as l,o as r,a as t,i as h,v as P,t as a,F as k,h as w,Q as u,n as S,f as F}from"./app-BDVLSo38.js";const U={class:"p-6"},A={class:"flex justify-between items-center mb-4"},C={class:"flex items-center gap-2"},B={class:"mb-4 flex gap-6"},D={class:"text-green-600 font-semibold"},N={class:"text-red-600 font-semibold"},$={class:"table-auto w-full border shadow"},V={class:"border px-4 py-2"},j={class:"border px-4 py-2"},H={class:"border px-4 py-2"},I={class:"border px-4 py-2"},L={class:"border px-4 py-2 flex gap-2"},M=["onClick"],Q=["onClick"],T={__name:"Index",props:{billings:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({status:""})}},setup(b){const n=b,i=_(n.filters.status??"");function d(s){const e=parseFloat(s);return isNaN(e)?"₱0.00":e.toLocaleString("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2})}const f=p(()=>n.billings.filter(s=>s.status==="Paid").reduce((s,e)=>s+(parseFloat(e.amount)||0),0)),m=p(()=>n.billings.filter(s=>s.status==="Unpaid").reduce((s,e)=>s+(parseFloat(e.amount)||0),0));function g(){u.get("/billing",{status:i.value},{preserveState:!0,replace:!0})}function x(s){u.post(`/billing/${s}/status`,{status:"Paid"},{preserveScroll:!0,onSuccess:()=>{const e=n.billings.find(o=>o.id===s);e&&(e.status="Paid")}})}function y(s){confirm("Are you sure you want to delete this billing record?")&&u.delete(`/billing/${s}`,{preserveScroll:!0,onSuccess:()=>alert("Billing record deleted successfully.")})}return(s,e)=>(r(),l("div",U,[e[5]||(e[5]=t("h1",{class:"text-2xl font-bold mb-4"},"Billing Records",-1)),t("div",A,[e[3]||(e[3]=t("a",{href:"/billing/pdf/export",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Download PDF Report ",-1)),t("div",C,[e[2]||(e[2]=t("label",{for:"status",class:"font-semibold"},"Filter:",-1)),h(t("select",{id:"status","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),onChange:g,class:"border rounded px-2 py-1"},e[1]||(e[1]=[t("option",{value:""},"All",-1),t("option",{value:"Paid"},"Paid",-1),t("option",{value:"Unpaid"},"Unpaid",-1)]),544),[[P,i.value]])])]),t("div",B,[t("p",D," ✅ Total Paid: "+a(d(f.value)),1),t("p",N," ❌ Total Unpaid: "+a(d(m.value)),1)]),t("table",$,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"border px-4 py-2"},"Invoice No"),t("th",{class:"border px-4 py-2"},"Patient"),t("th",{class:"border px-4 py-2"},"Amount"),t("th",{class:"border px-4 py-2"},"Status"),t("th",{class:"border px-4 py-2"},"Actions")])],-1)),t("tbody",null,[(r(!0),l(k,null,w(n.billings,o=>{var c;return r(),l("tr",{key:o.id},[t("td",V,a(o.invoice_no),1),t("td",j,a(((c=o.patient)==null?void 0:c.name)??"Unknown"),1),t("td",H,a(d(o.amount)),1),t("td",I,[t("span",{class:S({"text-green-600 font-semibold":o.status==="Paid","text-red-600 font-semibold":o.status==="Unpaid","text-yellow-600 font-semibold":o.status==="Pending"})},a(o.status),3)]),t("td",L,[o.status!=="Paid"?(r(),l("button",{key:0,onClick:v=>x(o.id),class:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600"}," Mark as Paid ",8,M)):F("",!0),t("button",{onClick:v=>y(o.id),class:"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700"}," Delete ",8,Q)])])}),128))])])]))}};export{T as default};
